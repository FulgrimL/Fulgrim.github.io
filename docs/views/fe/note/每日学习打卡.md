---
title: 每日学习打卡
sidebar: 'false'
date: 2021-01-12
tags:
 - 学习打卡
categories:
 - 学习打卡
---

> 当身边发生了这样的案例，你就知道学习的重要性了
<!-- more -->

# 一月份

## 1.12

### node返回一个html
```
response.writeHead(200,{'Content-Type':'text/html'})
fs.readFile('./practice/login.html','utf-8',function(err,data){
if(err){
throw err ;
}
response.end(data);
});
```
egg中参考：[egg 模板渲染](https://eggjs.org/zh-cn/core/view.html)

注意配置静态文件存放地址：一般放在app/view中
###  Object.defineProperty() 不能监听数组长度变化以及对象新属性的变化

通过下标修改数组长度，数组的length属性被初始化configurable	false，所以想要通过get/set方法来监听length属性是不可行的。

vue中通过重写了七个能改变原数组的方法来进行数据监听

对象还是使用Object.defineProperty()添加get和set来监听

参考
- [vue通过数组索引修改数据，视图会变化吗？](https://mp.weixin.qq.com/s/PepQf9LtxIER9xE9MVEAxw)

- [为什么defineProperty不能检测到数组长度的变化](https://youngzhang08.github.io/2018/07/30/%E4%B8%BA%E4%BB%80%E4%B9%88defineProperty%E4%B8%8D%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6%E7%9A%84%E5%8F%98%E5%8C%96/)
### 实现一个拖拽组件
```
document.onmousedown = function(e) {
	//获取目标元素
	let dropDom = e.target; 
	//算出鼠标相对元素的位置
	let disX = e.clientX - dropDom.offsetLeft;
	let disY = e.clientY - dropDom.offsetTop;
	//鼠标按下并移动的事件
	document.onmousemove = (e) => {
		//用鼠标的位置减去鼠标相对元素的位置，得到元素的位置
		let left = e.clientX - disX;
		let top = e.clientY - disY;

		//绑定元素位置到positionX和positionY上面,貌似没啥用
		this.positionX = top;
		this.positionY = left;

		//移动当前元素
		dropDom.style.left = left + "px";
		dropDom.style.top = top + "px";
	};
	document.onmouseup = (e) => {
		document.onmousemove = null;
		document.onmouseup = null;
	};
};
```
### 不知道父元素宽高，水平垂直居中兼容性最好的方案
```
position: absolute;
left: 0;
top: 0;
bottom: 0;
right: 0;
margin: auto;
```

### 输入字符串 '1,5,3,2,10,8,7' 输出字符串 '1~3,5,7~8,10'
```
const str = '1,5,3,2,10,8,7';
const test = (str) => {
	// 分割（注意分割后的每一项字符串）
	// sort排序，a-b从小，b-a从大
	const arr = str.split(',').sort((a, b) => +a - +b)
  let res = [];
  let pre = arr[0];
  let next = arr[0];
  let j = 0;
  arr.forEach((v, i) => {
    if (+v + 1 === +arr[i + 1]) {
      next = arr[i + 1];
    } else {
      res[j] = (pre === next ? arr[i] : `${pre}~${next}`);
      pre = next = arr[i + 1];
      j++;
    }
  });
  return res.join(',');
};
console.log(test(str));
```

## 1.13

计划: 
- 搭建个人组件库
- 一道算法题
- xxxx